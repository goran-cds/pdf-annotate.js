!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PDFAnnotate=e():t.PDFAnnotate=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this)}t.exports=u,t.exports.once=function(t,e){return new Promise((function(n,r){function o(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments))}h(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&h(t,"error",e,n)}(t,o,{once:!0})}))},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var c=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function s(t){return void 0===t._maxListeners?u.defaultMaxListeners:t._maxListeners}function d(t,e,n,r){var o,i,a,u;if(l(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=s(t))>0&&a.length>o&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,u=c,console&&console.warn&&console.warn(u)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=f.bind(r);return o.listener=n,r.wrapFn=o,o}function y(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):m(o,o.length)}function v(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function h(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){r.once&&t.removeEventListener(e,o),n(i)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},u.prototype.getMaxListeners=function(){return s(this)},u.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var u=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var c=o[t];if(void 0===c)return!1;if("function"==typeof c)i(c,this,e);else{var l=c.length,s=m(c,l);for(n=0;n<l;++n)i(s[n],this,e)}return!0},u.prototype.addListener=function(t,e){return d(this,t,e,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,e){return d(this,t,e,!0)},u.prototype.once=function(t,e){return l(e),this.on(t,p(this,t,e)),this},u.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,p(this,t,e)),this},u.prototype.removeListener=function(t,e){var n,r,o,i,a;if(l(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},u.prototype.listeners=function(t){return y(this,t,!0)},u.prototype.rawListeners=function(t){return y(this,t,!1)},u.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},u.prototype.listenerCount=v,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){"use strict";function r(t){throw new Error(t+" is not implemented")}n.r(e);var o=n(0),i=n.n(o),a=/[A-Z]/g,u=["viewBox"];function c(t,e){Object.keys(e).forEach((function(n){t.setAttribute(function(t){return-1===u.indexOf(t)&&(t=t.replace(a,(function(t){return"-"+t.toLowerCase()}))),t}(n),e[n])}))}var l=/^([a-f0-9]{6}|[a-f0-9]{3})$/i;function s(t){return l.test(t)&&(t="#".concat(t)),t}var d=25;function f(t){var e=document.createElementNS("http://www.w3.org/2000/svg","rect");return c(e,{x:t.x,y:t.y,width:t.width,height:t.height}),e}function p(t){var e=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","rect");return c(e,{x:t.rectangles[0].x,y:t.rectangles[0].y,width:t.rectangles[0].width,height:t.rectangles[0].height}),e}(t),n=s(t.color||"#FFFF00");return c(e,{fill:n,stroke:n,"stroke-width":1}),e}function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return v(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function m(t){var e=document.createElementNS("http://www.w3.org/2000/svg","text");c(e,{x:t.x,y:t.y,fill:s(t.color||"#000"),fontSize:t.size,transform:"rotate(".concat(t.rotation,")"),style:"white-space: pre"}),function(t,e){var n,r=(e||"").split("\n"),o=t.getAttribute("x"),i=Number(t.getAttribute("y")),a=Number(t.getAttribute("font-size")),u=y(r);try{for(u.s();!(n=u.n()).done;){var c=n.value,l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttribute("y",i.toString()),l.setAttribute("x",o),l.innerHTML=c,t.appendChild(l),i+=a}}catch(t){u.e(t)}finally{u.f()}}(e,t.content);var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.appendChild(e),n}var h=1;function g(t){var e=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","rect");c(n,{x:t.cx-50,y:t.cy-15,width:100,height:30,fill:"#f9fac3"}),e.appendChild(n);var r=document.createElementNS("http://www.w3.org/2000/svg","svg");c(r,{x:t.cx-40,y:t.cy-6,width:12,height:12,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"});var o=document.createElementNS("http://www.w3.org/2000/svg","path");c(o,{d:"M15.4998 5.50067L18.3282 8.3291M13 21H21M3 21.0004L3.04745 20.6683C3.21536 19.4929 3.29932 18.9052 3.49029 18.3565C3.65975 17.8697 3.89124 17.4067 4.17906 16.979C4.50341 16.497 4.92319 16.0772 5.76274 15.2377L17.4107 3.58969C18.1918 2.80865 19.4581 2.80864 20.2392 3.58969C21.0202 4.37074 21.0202 5.63707 20.2392 6.41812L8.37744 18.2798C7.61579 19.0415 7.23497 19.4223 6.8012 19.7252C6.41618 19.994 6.00093 20.2167 5.56398 20.3887C5.07171 20.5824 4.54375 20.6889 3.48793 20.902L3 21.0004Z",stroke:"#545225","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),r.appendChild(o),e.appendChild(r);var i=document.createElementNS("http://www.w3.org/2000/svg","text");return c(i,{x:t.cx+5,y:t.cy+1,"font-size":8,"text-anchor":"middle","dominant-baseline":"middle",fill:"#545225"}),i.textContent="Signature area ".concat(h),e.appendChild(i),h+=1,e}(t);return e}function b(t,e,n){return[t[0],t[1],t[2],t[3],t[0]*e+t[2]*n+t[4],t[1]*e+t[3]*n+t[5]]}function w(t,e){e=e*Math.PI/180;var n=Math.cos(e),r=Math.sin(e);return[t[0]*n+t[2]*r,t[1]*n+t[3]*r,t[0]*-r+t[2]*n,t[1]*-r+t[3]*n,t[4],t[5]]}function x(t,e,n){return[t[0]*e,t[1]*e,t[2]*n,t[3]*n,t[4],t[5]]}function A(t,e,n){return{x:t,y:e,z:n}}function S(t,e,n){return{xcoord:t,ycoord:e,zcoord:n}}function E(t,e){return S(e.x-t.x,e.y-t.y,e.z-t.z)}function C(t,e){return A(t.x+e.xcoord,t.y+e.ycoord,t.z+e.zcoord)}function L(t,e){return S(t.xcoord*e,t.ycoord*e,t.zcoord*e)}function k(t){return Math.sqrt(Math.pow(t.xcoord,2)+Math.pow(t.ycoord,2)+Math.pow(t.zcoord,2))}function I(t){return L(t,-1)}function _(t){var e=k(t);return S(t.xcoord/e,t.ycoord/e,t.zcoord/e)}function N(t){var e,n,r=document.createElementNS("http://www.w3.org/2000/svg","polygon");if(2===t.lines.length){var o=t.lines[0],i=t.lines[t.lines.length-1],a=A(o[0],o[1],0),u=A(i[0],i[1],0),l=E(a,u),d=_(l);l=E(a,u=C(a,L(d,40)));var f=S(0,0,1),p=_((n=f,S((e=d).ycoord*n.zcoord-e.zcoord*n.ycoord,e.zcoord*n.xcoord-e.xcoord*n.zcoord,e.xcoord*n.ycoord-e.ycoord*n.xcoord))),y=t.width||10,v=C(a,L(p,.5*y)),m=C(v,L(d,k(l)-2*y)),h=C(m,L(p,y)),g=u,b=C(a,L(I(p),.5*y)),w=C(b,L(d,k(l)-2*y)),x=C(w,L(I(p),y));c(r,{points:v.x+","+v.y+" "+m.x+","+m.y+" "+h.x+","+h.y+" "+g.x+","+g.y+" "+x.x+","+x.y+" "+w.x+","+w.y+" "+b.x+","+b.y,stroke:s(t.color||"#000"),fill:s(t.color||"#000")})}return r}var O=/firefox/i.test(navigator.userAgent);function j(t){var e,n;switch(t.rotation%360){case 0:e=n=0;break;case 90:e=0,n=t.width/t.scale*-1;break;case 180:e=t.width/t.scale*-1,n=t.height/t.scale*-1;break;case 270:e=t.height/t.scale*-1,n=0}return{x:e,y:n}}function P(t,e){var n=j(e);if(t.setAttribute("transform","scale(".concat(e.scale,") rotate(").concat(e.rotation,") translate(").concat(n.x,", ").concat(n.y,")")),!O&&"svg"===t.nodeName.toLowerCase()){t.setAttribute("x",parseInt(t.getAttribute("x"),10)*e.scale),t.setAttribute("y",parseInt(t.getAttribute("y"),10)*e.scale);var r=parseInt(t.getAttribute("x",10)),o=parseInt(t.getAttribute("y",10)),i=parseInt(t.getAttribute("width"),10),a=parseInt(t.getAttribute("height"),10),u=t.querySelector("path"),c=u.parentNode;switch([t,c,u,t.querySelector("rect")].forEach((function(t){t.setAttribute("width",parseInt(t.getAttribute("width"),10)*e.scale),t.setAttribute("height",parseInt(t.getAttribute("height"),10)*e.scale)})),P(u,Object.assign({},e,{scale:1})),e.rotation%360){case 90:t.setAttribute("x",e.width-o-i),t.setAttribute("y",r),c.setAttribute("x",1),c.setAttribute("y",0);break;case 180:t.setAttribute("x",e.width-r-i),t.setAttribute("y",e.height-o-a),c.setAttribute("y",2);break;case 270:t.setAttribute("x",o),t.setAttribute("y",e.height-r-a),c.setAttribute("x",-1),c.setAttribute("y",0)}}return t}function M(t,e,n){var r,o,i;switch(n||(n=JSON.parse(t.getAttribute("data-pdf-annotate-viewport"))),e.type){case"area":case"highlight":r=function(t){if("highlight"===t.type){var e=document.createElementNS("http://www.w3.org/2000/svg","g");return c(e,{fill:s(t.color||"#ff0"),fillOpacity:.2}),t.rectangles.forEach((function(t){e.appendChild(f(t))})),e}var n=f(t);return c(n,{stroke:s(t.color||"#f00"),fill:"none"}),n}(e);break;case"signature":r=g(e);break;case"strikeout":o=e,c(i=document.createElementNS("http://www.w3.org/2000/svg","g"),{stroke:s(o.color||"#f00"),strokeWidth:1}),o.rectangles.forEach((function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","line");c(e,{x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y}),i.appendChild(e)})),r=i;break;case"point":r=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","rect"),o=document.createElementNS("http://www.w3.org/2000/svg","path");return c(e,{width:d,height:d,x:t.x,y:t.y}),c(n,{width:d,height:d,x:0,y:-1.25,viewBox:"0 0 1000 1000"}),c(r,{width:d,height:d,stroke:"#000",fill:"#ff0"}),c(o,{d:"M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z",strokeWidth:50,stroke:"#000",fill:"#fff"}),n.appendChild(o),e.appendChild(r),e.appendChild(n),e}(e);break;case"textbox":r=m(e);break;case"drawing":r=function(t){var e=[],n=document.createElementNS("http://www.w3.org/2000/svg","path");if(t.lines.length>0){e.push("M".concat(t.lines[0][0]," ").concat(t.lines[0][1]));for(var r=1,o=t.lines.length;r<o;r++){var i=t.lines[r];t.lines[r+1]&&e.push("L".concat(i[0]," ").concat(i[1]))}}return c(n,{d:"".concat(e.join(" ")),stroke:s(t.color||"#000"),strokeWidth:t.width||1,fill:"none"}),n}(e);break;case"arrow":r=N(e);case"stamp":r=p(e)}return r&&(r.setAttribute("data-pdf-annotate-id",e.uuid),r.setAttribute("aria-hidden",!0),Object.keys(e).filter((function(t){return-1===["color","x","y","cx","cy","color","documentId","lines","page","width","class","content","size","rotation","r"].indexOf(t)})).forEach((function(t){r.setAttribute("data-pdf-annotate-".concat(t),e[t])})),t.appendChild(P(r,n))),r}function R(t,e,n){return n||(n=JSON.parse(t.getAttribute("data-pdf-annotate-viewport"))),e&&(e=P(e,n)),e}var T="#00BFFF",B=document.createElement("style");function q(t){for(var e=t;(e=e.parentNode)&&e!==document;)if("SVG"===e.nodeName.toUpperCase()&&"true"===e.getAttribute("data-pdf-annotate-container"))return e;return null}function z(t,e){for(var n=document.querySelectorAll('svg[data-pdf-annotate-container="true"]'),r=0,o=n.length;r<o;r++){var i=n[r];if(X(t,e,i.getBoundingClientRect()))return i}return null}function F(t,e){for(var n=null,r=document.elementFromPoint(t,e);!n&&r&&r!==document;){r.getAttribute("data-pdf-annotate-type")&&(n=r),r=r.parentNode}return n}function X(t,e,n){return e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right}function Y(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height,o=0,i=0;if(["line","path"].indexOf(t.tagName.toLowerCase())>-1&&t.getBBox){var a=t.getBBox();o=(e.width-a.width)/2,i=(e.height-a.height)/2,n=a.width,r=a.height}var u=function(t){var e=t;for(;(e=e.parentNode)&&e!==document&&"SVG"!==e.nodeName.toUpperCase(););var n=e.getBoundingClientRect();return{offsetLeft:n.left,offsetTop:n.top}}(t),c=u.offsetLeft,l=u.offsetTop;return{top:e.top-l+i,left:e.left-c+o,bottom:e.bottom-l-i,right:e.right-c-o,width:n,height:r}}function U(t,e){var n={},r=J(t).viewport;return Object.keys(e).forEach((function(t){n[t]=e[t]*r.scale})),n}function Q(t,e,n){var r=[1,0,0,1,0,0];r=w(r=x(r,(n=n||J(e).viewport).scale,n.scale),n.rotation);var o,i,a,u=j(n);return r=b(r,u.x,u.y),o=t,a=(i=r)[0]*i[3]-i[1]*i[2],[(o[0]*i[3]-o[1]*i[2]+i[2]*i[5]-i[4]*i[3])/a,(-o[0]*i[1]+o[1]*i[0]+i[4]*i[1]-i[5]*i[0])/a]}function H(t,e,n){var r=[1,0,0,1,0,0];r=w(r=x(r,(n=n||J(e).viewport).scale,n.scale),n.rotation);var o,i,a=j(n);return r=b(r,a.x,a.y),i=r,[(o=t)[0]*i[0]+o[1]*i[2]+i[4],o[0]*i[1]+o[1]*i[3]+i[5]]}function W(t,e){var n={},r=J(t).viewport;return Object.keys(e).forEach((function(t){n[t]=e[t]/r.scale})),n}function $(){B.parentNode||document.head.appendChild(B)}function D(){B.parentNode&&B.parentNode.removeChild(B)}function J(t){return{documentId:t.getAttribute("data-pdf-annotate-document"),pageNumber:parseInt(t.getAttribute("data-pdf-annotate-page"),10),viewport:JSON.parse(t.getAttribute("data-pdf-annotate-viewport"))}}B.innerHTML="\nbody {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",B.setAttribute("data-pdf-annotate-user-select","true");var V,G=new i.a;function K(){G.emit.apply(G,arguments)}function Z(){G.on.apply(G,arguments)}function tt(){G.removeListener.apply(G,arguments)}function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rt(r.key),r)}}function rt(t){var e=function(t,e){if("object"!=et(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==et(e)?e:e+""}document.addEventListener("click",(function(t){if(z(t.clientX,t.clientY)){var e=F(t.clientX,t.clientY);V&&V!==e&&G.emit("annotation:blur",V),e&&G.emit("annotation:click",e),V=e}}));var ot=function(){return t=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.keys(n).forEach((function(t){"function"==typeof n[t]&&"function"==typeof e[t]&&(e[t]=n[t])}))},e=[{key:"__getAnnotations",value:function(t,e){r("getAnnotations")}},{key:"getAnnotations",get:function(){return this.__getAnnotations},set:function(t){this.__getAnnotations=function(e,n){return t.apply(void 0,arguments).then((function(t){return t.annotations&&t.annotations.forEach((function(t){t.documentId=e})),t}))}}},{key:"getAnnotation",value:function(t,e){r("getAnnotation")}},{key:"__addAnnotation",value:function(t,e,n){r("addAnnotation")}},{key:"addAnnotation",get:function(){return this.__addAnnotation},set:function(t){this.__addAnnotation=function(e,n,r){return t.apply(void 0,arguments).then((function(t){return K("annotation:add",e,n,t),t}))}}},{key:"__editAnnotation",value:function(t,e,n){r("editAnnotation")}},{key:"editAnnotation",get:function(){return this.__editAnnotation},set:function(t){this.__editAnnotation=function(e,n,r){return t.apply(void 0,arguments).then((function(t){return K("annotation:edit",e,n,t),t}))}}},{key:"__deleteAnnotation",value:function(t,e){r("deleteAnnotation")}},{key:"deleteAnnotation",get:function(){return this.__deleteAnnotation},set:function(t){this.__deleteAnnotation=function(e,n){return t.apply(void 0,arguments).then((function(t){return t&&K("annotation:delete",e,n),t}))}}},{key:"getComments",value:function(t,e){r("getComments")}},{key:"__addComment",value:function(t,e,n){r("addComment")}},{key:"addComment",get:function(){return this.__addComment},set:function(t){this.__addComment=function(e,n,r){return t.apply(void 0,arguments).then((function(t){return K("comment:add",e,n,t),t}))}}},{key:"__deleteComment",value:function(t,e){r("deleteComment")}},{key:"deleteComment",get:function(){return this.__deleteComment},set:function(t){this.__deleteComment=function(e,n){return t.apply(void 0,arguments).then((function(t){return t&&K("comment:delete",e,n),t}))}}}],e&&nt(t.prototype,e),n&&nt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),it=/[xy]/g;function at(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}function ut(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(it,at)}function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,st(r.key),r)}}function st(t){var e=function(t,e){if("object"!=ct(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ct(e)?e:e+""}function dt(t,e,n){return e=pt(e),function(t,e){if(e&&("object"==ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ft()?Reflect.construct(e,n||[],pt(t).constructor):e.apply(t,n))}function ft(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ft=function(){return!!t})()}function pt(t){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pt(t)}function yt(t,e){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yt(t,e)}var vt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=dt(this,e,[{getAnnotations:function(t,e){return new Promise((function(n,r){var o=mt(t).filter((function(t){return t.page===e&&"Annotation"===t.class}));n({documentId:t,pageNumber:e,annotations:o})}))}}])).getAnnotation=function(t,e){return Promise.resolve(mt(t)[gt(t,e)])},t.addAnnotation=function(t,e,n){return new Promise((function(r,o){n.class="Annotation",n.uuid=ut(),n.page=e;var i=mt(t);i.push(n),ht(t,i),r(n)}))},t.editAnnotation=function(t,e,n){return new Promise((function(r,o){var i=mt(t);i[gt(t,e)]=n,ht(t,i),r(n)}))},t.deleteAnnotation=function(t,e){return new Promise((function(n,r){if(!(mt(t).filter((function(t){return t.uuid===e}))[0]||{}))return r("Could not find annotation");var o=gt(t,e);if(o>-1){var i=mt(t);i.splice(o,1),ht(t,i)}n(!0)}))},t.getComments=function(t,e){return new Promise((function(n,r){n(mt(t).filter((function(t){return"Comment"===t.class&&t.annotation===e})))}))},t.addComment=function(t,e,n){return new Promise((function(r,o){var i={class:"Comment",uuid:ut(),annotation:e,content:n},a=mt(t);a.push(i),ht(t,a),r(i)}))},t.deleteComment=function(t,e){return new Promise((function(n,r){var o=mt(t).filter((function(t){return t.uuid===e}))[0]||{};if(!o)return r("Could not find annotation");for(var i=-1,a=mt(t),u=0,c=a.length;u<c;u++)if(a[u].uuid===e){i=u;break}i>-1&&(a.splice(i,1),ht(t,a)),n(!0)}))},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}(e,t),n=e,r&&lt(n.prototype,r),o&&lt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(ot);function mt(t){return JSON.parse(localStorage.getItem("".concat(t,"/annotations")))||[]}function ht(t,e){localStorage.setItem("".concat(t,"/annotations"),JSON.stringify(e))}function gt(t,e){for(var n=-1,r=mt(t),o=0,i=r.length;o<i;o++)if(r[o].uuid===e){n=o;break}return n}function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function wt(t){return function(t){if(Array.isArray(t))return xt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return xt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,St(r.key),r)}}function St(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bt(e)?e:e+""}function Et(t,e,n){return e=Lt(e),function(t,e){if(e&&("object"==bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ct()?Reflect.construct(e,n||[],Lt(t).constructor):e.apply(t,n))}function Ct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ct=function(){return!!t})()}function Lt(t){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lt(t)}function kt(t,e){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kt(t,e)}var It=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Et(this,e,[{getAnnotations:function(t,e){return new Promise((function(n,r){var o=_t(t).filter((function(t){return t.page===e&&"Annotation"===t.class}));n({documentId:t,pageNumber:e,annotations:o})}))}}]))._userId=n,t._globalEdit=r,t.getAnnotation=function(e,n){return Promise.resolve(Nt(e,t._userId)[jt(e,t._userId,n)])},t.addAnnotation=function(e,n,r){return new Promise((function(o,i){r.class="Annotation",r.uuid=ut(),r.page=n,r.userId=t._userId;var a=Nt(e,t._userId);a.push(r),Ot(e,t._userId,a),o(r)}))},t.editAnnotation=function(e,n,r){return new Promise((function(o,i){!t._globalEdit&&r.userId&&r.userId!==t._userId&&i("Non-matching userId");var a=Nt(e,r.userId);a[jt(e,r.userId,n)]=r,Ot(e,r.userId,a),o(r)}))},t.deleteAnnotation=function(e,n){return new Promise((function(r,o){var i=_t(e).filter((function(t){return t.uuid===n}))[0]||{};if(!i)return o("Could not find annotation");if(!t._globalEdit&&i.userId&&i.userId!==t._userId)return o("Non-matching userId");var a=jt(e,i.userId,n);if(a>-1){var u=Nt(e,i.userId);u.splice(a,1),Ot(e,i.userId,u)}r(!0)}))},t.getComments=function(e,n){return new Promise((function(r,o){r(Nt(e,t._userId).filter((function(t){return"Comment"===t.class&&t.annotation===n})))}))},t.addComment=function(e,n,r){return new Promise((function(o,i){var a={class:"Comment",uuid:ut(),annotation:n,content:r,userId:t._userId},u=Nt(e,t._userId);u.push(a),Ot(e,t._userId,u),o(a)}))},t.deleteComment=function(e,n){return new Promise((function(r,o){var i=_t(e).filter((function(t){return t.uuid===n}))[0]||{};if(!i)return o("Could not find annotation");if(!t._globalEdit&&i.userId&&i.userId!==t._userId)return o("Non-matching userId");for(var a=-1,u=Nt(e,i.userId),c=0,l=u.length;c<l;c++)if(u[c].uuid===n){a=c;break}a>-1&&(u.splice(a,1),Ot(e,i.userId,u)),r(!0)}))},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kt(t,e)}(e,t),n=e,(r=[{key:"userId",get:function(){return this._userId}}])&&At(n.prototype,r),o&&At(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(ot);function _t(t){for(var e=[],n=new RegExp("".concat(t,"/(.*)/annotations")),r=0;r<localStorage.length;r++)localStorage.key(r).search(n)>-1&&e.push.apply(e,wt(JSON.parse(localStorage.getItem(localStorage.key(r)))));return e}function Nt(t,e){return JSON.parse(localStorage.getItem("".concat(t,"/").concat(e,"/annotations")))||[]}function Ot(t,e,n){localStorage.setItem("".concat(t,"/").concat(e,"/annotations"),JSON.stringify(n))}function jt(t,e,n){for(var r=-1,o=Nt(t,e),i=0,a=o.length;i<a;i++)if(o[i].uuid===n){r=i;break}return r}var Pt={annotationLayerName:"annotationLayer",textLayerName:"textLayer",annotationSvgQuery:function(){return"svg."+this.annotationLayerName},annotationClassQuery:function(){return"."+this.annotationLayerName},textClassQuery:function(){return"."+this.textLayerName}};function Mt(t){return function(t){if(Array.isArray(t))return Rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Rt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Tt,Bt,qt,zt,Ft,Xt=!1,Yt=!1;function Ut(){Tt&&(Tt.parentNode.removeChild(Tt),Tt=null),document.removeEventListener("click",Ht),document.removeEventListener("keyup",Wt),document.removeEventListener("mousedown",$t),document.removeEventListener("mousemove",Dt),document.removeEventListener("mouseup",Jt),D()}function Qt(){if(Tt){var t=Tt.getAttribute("data-target-id"),e=J(Tt.parentNode.querySelector(Pt.annotationSvgQuery())).documentId;On.getStoreAdapter().deleteAnnotation(e,t).then((function(){Mt(document.querySelectorAll('[data-pdf-annotate-id="'.concat(t,'"]'))).forEach((function(t){t.parentNode.removeChild(t)}))})),Ut()}}function Ht(t){if(z(t.clientX,t.clientY)){var e=document.getElementById("pdf-annotate-edit-overlay");if(e){if(Yt||t.target===e)return;Ut()}}}function Wt(t){var e;e=t.key?"delete"===t.key.toLowerCase()||"backspace"===t.key.toLowerCase():8===t.keyCode||46===t.keyCode,Tt&&e&&"textarea"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&(t.preventDefault(),Qt())}function $t(t){if(t.target===Tt){var e=Tt.getAttribute("data-target-id"),n=document.querySelector('[data-pdf-annotate-id="'.concat(e,'"]')).getAttribute("data-pdf-annotate-type");"highlight"!==n&&"strikeout"!==n&&(Yt=!0,Bt=t.clientX,qt=t.clientY,zt=Tt.offsetLeft,Ft=Tt.offsetTop,Tt.style.background="rgba(255, 255, 255, 0.7)",Tt.style.cursor="move",Tt.querySelector("a").style.display="none",document.addEventListener("mousemove",Dt),document.addEventListener("mouseup",Jt),$())}}function Dt(t){var e=Tt.parentNode.getBoundingClientRect(),n=Ft+(t.clientY-qt),r=zt+(t.clientX-Bt),o=e.height,i=e.width;n>0&&n+Tt.offsetHeight<o&&(Tt.style.top="".concat(n,"px")),r>0&&r+Tt.offsetWidth<i&&(Tt.style.left="".concat(r,"px"))}function Jt(t){var e=Tt.getAttribute("data-target-id"),n=document.querySelectorAll('[data-pdf-annotate-id="'.concat(e,'"]')),r=n[0].getAttribute("data-pdf-annotate-type"),o=Tt.parentNode.querySelector(Pt.annotationSvgQuery()),i=J(o).documentId;Tt.querySelector("a").style.display="",On.getStoreAdapter().getAnnotation(i,e).then((function(t){var a="x",u="y";if(["circle","fillcircle","emptycircle"].indexOf(r)>-1&&(a="cx",u="cy"),"point"!==r){if(["area","highlight","textbox","circle","fillcircle","emptycircle"].indexOf(r)>-1){var c=Q([zt,Ft],o),l=Q([Tt.offsetLeft,Tt.offsetTop],o),s={x:l[0]-c[0],y:l[1]-c[1]};"textbox"===r&&(n=[n[0].firstChild]),Mt(n).forEach((function(e,n){var r=parseInt(e.getAttribute(a),10),o=parseInt(e.getAttribute(u),10);0!==s.y&&(o+=s.y,e.setAttribute(u,o),t.rectangles&&n<t.rectangles.length?t.rectangles[n].y=o:t[u]&&(t[u]=o)),0!==s.x&&(r+=s.x,e.setAttribute(a,r),t.rectangles&&n<t.rectangles.length?t.rectangles[n].x=r:t[a]&&(t[a]=r))}))}else{if("strikeout"===r)return;if("drawing"===r||"arrow"===r)return}On.getStoreAdapter().editAnnotation(i,e,t)}})),setTimeout((function(){Yt=!1}),0),Tt.style.background="",Tt.style.cursor="",document.removeEventListener("mousemove",Dt),document.removeEventListener("mouseup",Jt),D()}function Vt(t){!function(t){Ut(),Tt=document.createElement("div");var e=document.createElement("a"),n=q(t).parentNode,r=t.getAttribute("data-pdf-annotate-id"),o=Y(t),i=o.left-3,a=o.top-3;Tt.setAttribute("id","pdf-annotate-edit-overlay"),Tt.setAttribute("data-target-id",r),Tt.style.boxSizing="content-box",Tt.style.position="absolute",Tt.style.top="".concat(a,"px"),Tt.style.left="".concat(i,"px"),Tt.style.width="".concat(o.width,"px"),Tt.style.height="".concat(o.height,"px"),Tt.style.border="".concat(3,"px solid ").concat(T),Tt.style.borderRadius="".concat(3,"px"),Tt.style.zIndex=20100,e.innerHTML="×",e.setAttribute("href","javascript://"),e.style.background="#fff",e.style.borderRadius="20px",e.style.border="1px solid #bbb",e.style.color="#bbb",e.style.fontSize="16px",e.style.padding="2px",e.style.textAlign="center",e.style.textDecoration="none",e.style.position="absolute",e.style.top="-13px",e.style.right="-13px",e.style.width="25px",e.style.height="25px",Tt.appendChild(e),n.appendChild(Tt),document.addEventListener("click",Ht),document.addEventListener("keyup",Wt),document.addEventListener("mousedown",$t),e.addEventListener("click",Qt),e.addEventListener("mouseover",(function(){e.style.color="#35A4DC",e.style.borderColor="#999",e.style.boxShadow="0 1px 1px #ccc"})),e.addEventListener("mouseout",(function(){e.style.color="#bbb",e.style.borderColor="#bbb",e.style.boxShadow=""})),Tt.addEventListener("mouseover",(function(){Yt||(e.style.display="")})),Tt.addEventListener("mouseout",(function(){e.style.display="none"}))}(t)}var Gt,Kt,Zt,te=!1,ee=!1,ne=[];function re(t){Zt=null,ne=[],z(t.clientX,t.clientY)&&(ee=!0,t.preventDefault())}function oe(t){!function(t,e){if(!ee)return;var n;if(ee=!1,ne.length>1&&(n=z(t,e))){var r=J(n),o=r.documentId,i=r.pageNumber;On.getStoreAdapter().addAnnotation(o,i,{type:"drawing",width:Gt,color:Kt,lines:ne}).then((function(t){Zt&&n.removeChild(Zt),M(n,t)}))}}(t.clientX,t.clientY)}function ie(t){z(t.clientX,t.clientY)&&ee&&function(t,e){var n=z(t,e);if(!n)return;var r=n.getBoundingClientRect(),o=Q([t-r.left,e-r.top],n);if(o[0]=o[0].toFixed(2),o[1]=o[1].toFixed(2),ne.push(o),ne.length<=1)return;Zt&&n.removeChild(Zt);Zt=M(n,{type:"drawing",color:Kt,width:Gt,lines:ne})}(t.clientX,t.clientY)}function ae(t){27===t.keyCode&&(ne=null,Zt.parentNode.removeChild(Zt),document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",oe))}var ue,ce,le,se,de,fe,pe=!1;function ye(t){var e=F(t.clientX,t.clientY);if(null!==e){var n=e.getAttribute("data-pdf-annotate-type");if("circle"===n||"fillcircle"===n||"emptycircle"===n){var r=q(e),o=J(r).documentId,i=e.getAttribute("data-pdf-annotate-id");On.getStoreAdapter().getAnnotation(o,i).then((function(t){if(t){le=null,se=[];var e=H([t.cx,t.cy],r),n=r.getBoundingClientRect();fe=e[0]+n.left,de=e[1]+n.top,document.addEventListener("mousemove",me),document.addEventListener("mouseup",ve)}}))}}}function ve(t){var e;if(se.length>1&&(e=z(t.clientX,t.clientY))){var n=J(e),r=n.documentId,o=n.pageNumber;On.getStoreAdapter().addAnnotation(r,o,{type:"arrow",width:ue,color:ce,lines:se}).then((function(t){le&&e.removeChild(le),M(e,t)}))}document.removeEventListener("mousemove",me),document.removeEventListener("mouseup",ve)}function me(t){!function(t,e){var n=z(t,e);if(!n)return;var r=n.getBoundingClientRect(),o=Q([t-r.left,e-r.top],n);if(se.length<2)return void se.push(o);se[1]=o;le&&n.removeChild(le);le=M(n,{type:"arrow",color:ce,width:ue,lines:se})}(0===se.length?fe:t.clientX,0===se.length?de:t.clientY)}function he(t){27===t.keyCode&&(se=null,le.parentNode.removeChild(le),document.removeEventListener("mousemove",me),document.removeEventListener("mouseup",ve))}function ge(t){return function(t){if(Array.isArray(t))return be(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return be(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var we=!1,xe=null;function Ae(t){we=!0,xe=[t.clientX,t.clientY]}function Se(t){we=!1,Ce(F(t.clientX,t.clientY))}function Ee(t){if(we){var e=[],n=Math.abs(xe[0]-t.clientX),r=Math.abs(xe[1]-t.clientY);if(n>=1||r>=1)for(var o=Math.round(Math.max(n,r)),i=Math.min(n,r)/o,a=n<r,u=[Math.min(xe[0],t.clientX),Math.min(xe[1],t.clientY)],c=0;c<o;c++)a?e.push([Math.round(u[0]+i*c),Math.round(u[1]+c)]):e.push([Math.round(u[0]+c),Math.round(u[1]+i*c)]);for(var l=0,s=e;l<s.length;l++){var d=s[l];Ce(F(d[0],d[1]))}xe=[t.clientX,t.clientY]}}function Ce(t){if(we&&t){var e=J(t.parentElement).documentId,n=t.getAttribute("data-pdf-annotate-id");On.getStoreAdapter().deleteAnnotation(e,n).then((function(){ge(document.querySelectorAll('[data-pdf-annotate-id="'.concat(n,'"]'))).forEach((function(t){t.parentNode.removeChild(t)}))}))}}var Le,ke=!1;function Ie(t){!Le&&z(t.clientX,t.clientY)&&((Le=document.createElement("input")).setAttribute("id","pdf-annotate-point-input"),Le.setAttribute("placeholder","Enter comment"),Le.style.border="3px solid ".concat(T),Le.style.borderRadius="3px",Le.style.position="absolute",Le.style.top="".concat(t.clientY,"px"),Le.style.left="".concat(t.clientX,"px"),Le.addEventListener("blur",_e),Le.addEventListener("keyup",Ne),document.body.appendChild(Le),Le.focus())}function _e(){Oe()}function Ne(t){27===t.keyCode?je():13===t.keyCode&&Oe()}function Oe(){if(Le.value.trim().length>0){var t=parseInt(Le.style.left,10),e=parseInt(Le.style.top,10),n=Le.value.trim(),r=z(t,e);if(!r)return;var o=r.getBoundingClientRect(),i=J(r),a=i.documentId,u=i.pageNumber,c=Object.assign({type:"point"},W(r,{x:t-o.left,y:e-o.top}));On.getStoreAdapter().addAnnotation(a,u,c).then((function(t){On.getStoreAdapter().addComment(a,t.uuid,n),M(r,t)}))}je()}function je(){Le.removeEventListener("blur",_e),Le.removeEventListener("keyup",Ne),document.body.removeChild(Le),Le=null}function Pe(t){return function(t){if(Array.isArray(t))return Me(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Me(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Re,Te,Be,qe,ze=!1;function Fe(t){var e;if("area"===Re&&(e=z(t.clientX,t.clientY))){var n=e.getBoundingClientRect();Be=t.clientY,qe=t.clientX,(Te=document.createElement("div")).style.position="absolute",Te.style.top="".concat(Be-n.top,"px"),Te.style.left="".concat(qe-n.left,"px"),Te.style.border="3px solid ".concat(T),Te.style.borderRadius="3px",e.parentNode.appendChild(Te),document.addEventListener("mousemove",Xe),$()}}function Xe(t){var e=Te.parentNode.querySelector(Pt.annotationSvgQuery()).getBoundingClientRect();qe+(t.clientX-qe)<e.right&&(Te.style.width="".concat(t.clientX-qe,"px")),Be+(t.clientY-Be)<e.bottom&&(Te.style.height="".concat(t.clientY-Be,"px"))}function Ye(t){var e;if("area"!==Re&&(e=function(){try{var t=window.getSelection().getRangeAt(0).getClientRects();if(t.length>0&&t[0].width>0&&t[0].height>0)return t}catch(t){}return null}()))Qe(Re,Pe(e).map((function(t){return{top:t.top,left:t.left,width:t.width,height:t.height}})));else if("area"===Re&&Te){var n=Te.parentNode.querySelector(Pt.annotationSvgQuery()).getBoundingClientRect();Qe(Re,[{top:parseInt(Te.style.top,10)+n.top,left:parseInt(Te.style.left,10)+n.left,width:parseInt(Te.style.width,10),height:parseInt(Te.style.height,10)}]),Te.parentNode.removeChild(Te),Te=null,document.removeEventListener("mousemove",Xe),D()}}function Ue(t){27===t.keyCode&&(window.getSelection().removeAllRanges(),Te&&Te.parentNode&&(Te.parentNode.removeChild(Te),Te=null,document.removeEventListener("mousemove",Xe)))}function Qe(t,e,n){var r,o=z(e[0].left,e[0].top);if(o){var i=o.getBoundingClientRect();if(n||("highlight"===t?n="FFFF00":"strikeout"===t&&(n="FF0000")),r={type:t,color:n,rectangles:Pe(e).map((function(e){var n=0;return"strikeout"===t&&(n=e.height/2),function(t,e,n){var r=[t.x,t.y],o=[t.x+t.width,t.y+t.height];return r=Q(r,e,n),o=Q(o,e,n),{x:Math.min(r[0],o[0]),y:Math.min(r[1],o[1]),width:Math.abs(o[0]-r[0]),height:Math.abs(o[1]-r[1])}}({y:e.top+n-i.top,x:e.left-i.left,width:e.width,height:e.height},o)})).filter((function(t){return t.width>0&&t.height>0&&t.x>-1&&t.y>-1}))},0!==r.rectangles.length){if("area"===t){var a=r.rectangles[0];delete r.rectangles,r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height}var u=J(o),c=u.documentId,l=u.pageNumber;On.getStoreAdapter().addAnnotation(c,l,r).then((function(t){M(o,t)}))}}}var He,We=!1,$e=100,De="F9FAC3";function Je(t){var e=z(t.clientX,t.clientY);if(e){var n=e.getBoundingClientRect(),r=new CustomEvent("annotation:placed",{detail:{toolType:He,content:e,position:{x:t.clientX-n.left,y:t.clientY-n.top},size:{w:$e,h:30}}});!function(t,e,n,r,o,i){var a=Q([n.x,n.y],t),u={type:e,color:i,cx:a[0],cy:a[1],w:r,h:o},c=J(t),l=c.documentId,s=c.pageNumber;On.getStoreAdapter().addAnnotation(l,s,u).then((function(e){M(t,e)}))}(e,He,{x:t.clientX-n.left,y:t.clientY-n.top},$e,30,De),document.dispatchEvent(r)}}var Ve,Ge=!1,Ke=localStorage.getItem("text/size")||12,Ze=localStorage.getItem("text/color")||"#000000";function tn(t){!Ve&&z(t.clientX,t.clientY)&&t.srcElement.classList.contains("annotationLayer")&&((Ve=document.createElement("textarea")).setAttribute("id","pdf-annotate-text-input"),Ve.setAttribute("placeholder","Enter text... SHIFT + ENTER for new line"),Ve.style.border="3px solid ".concat(T),Ve.style.borderRadius="3px",Ve.style.position="fixed",Ve.style.top="".concat(t.clientY,"px"),Ve.style.left="".concat(t.clientX,"px"),Ve.style.fontSize="".concat(Ke,"px"),Ve.style.zIndex="41",Ve.addEventListener("blur",en),Ve.addEventListener("keyup",nn),document.body.appendChild(Ve),Ve.focus())}function en(){rn()}function nn(t){27===t.keyCode?on():13!==t.keyCode||t.shiftKey||rn()}function rn(){var t=Ve.value?Ve.value.replace(/ +$/,""):"";if(t.length>0){var e=parseInt(Ve.style.left,10),n=parseInt(Ve.style.top,10),r=z(e,n);if(!r)return;var o=Ke,i=J(r),a=i.documentId,u=i.pageNumber,c=i.viewport,l=1/c.scale,s=r.getBoundingClientRect(),d=Q([e-s.left,n-s.top+o],r,c),f={type:"textbox",size:Ke*l,color:Ze,content:t,x:d[0],y:d[1],rotation:-c.rotation},p=new CustomEvent("annotation:placed",{detail:{toolType:"textbox",content:t,position:{x:d[0],y:d[1]},size:Ke*l}});On.getStoreAdapter().addAnnotation(a,u,f).then((function(t){M(r,t)})),document.dispatchEvent(p)}on()}function on(){Ve&&(Ve.removeEventListener("blur",en),Ve.removeEventListener("keyup",nn),document.body.removeChild(Ve),Ve=null)}function an(t,e){var n=document.createElement("div"),r=document.createTextNode(t);return n.appendChild(r),n.setAttribute("id","pdf-annotate-screenreader-".concat(e)),n.style.position="absolute",n.style.left="-10000px",n.style.top="auto",n.style.width="1px",n.style.height="1px",n.style.overflow="hidden",n}function un(t){return function(t){if(Array.isArray(t))return cn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return cn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ln(t,e,n,r,o){var i=function(t,e,n){var r=document.querySelector('svg[data-pdf-annotate-page="'.concat(n,'"]')),o=r.getBoundingClientRect();return e=U(r,{y:e}).y+o.top,t=U(r,{x:t}).x+o.left,un(r.parentNode.querySelectorAll(Pt.textClassQuery()+" [data-canvas-width]")).filter((function(n){return X(t,e,n.getBoundingClientRect())}))[0]}(e=Math.max(e+2*(o?1:-1),0),n+2,r);if(!i)return!1;e+=2*(o?-1:1);var a=document.querySelector('svg[data-pdf-annotate-page="'.concat(r,'"]')),u=W(a,{left:i.getBoundingClientRect().left}).left-a.getBoundingClientRect().left,c=i.cloneNode(!0),l=c.innerHTML.split(""),s=[];for(c.style.position="absolute",c.style.top="-10000px",c.style.left="-10000px",document.body.appendChild(c);l.length;){if(">"===l[l.length-1])for(;l.length&&(s.unshift(l.pop()),"<"!==s[0]););if(c.innerHTML=l.join(""),u+W(a,{width:c.getBoundingClientRect().width}).width<=e)break;s.unshift(l.pop())}return i.innerHTML=l.join("")+t.outerHTML+s.join(""),c.parentNode.removeChild(c),!0}function sn(t){return function(t){if(Array.isArray(t))return dn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return dn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function fn(t,e,n,r){if(ln(t,e,n,r,!0))return!0;var o=document.querySelector('svg[data-pdf-annotate-page="'.concat(r,'"]')),i=o.getBoundingClientRect(),a=sn(o.parentNode.querySelectorAll(Pt.textClassQuery()+" > div"));n=U(o,{y:n}).y+i.top,e=U(o,{x:e}).x+i.left;for(var u=0,c=a.length;u<c;u++){var l=a[u];if(n<=l.getBoundingClientRect().top)return l.parentNode.insertBefore(t,l),!0}var s=o.parentNode.querySelector(Pt.textClassQuery());if(s&&X(e,n,s.getBoundingClientRect()))return s.appendChild(t),!0;return!1}function pn(t){if(t){var e=document.querySelector("#pdf-annotate-screenreader-".concat(t.annotation," ol"));if(e){var n=document.createElement("li");n.setAttribute("id","pdf-annotate-screenreader-comment-".concat(t.uuid)),n.appendChild(document.createTextNode("".concat(t.content))),e.appendChild(n)}}}function yn(t,e,n){return(Array.isArray(n)?Promise.resolve(n):On.getStoreAdapter().getComments(t,e)).then((function(t){var n=document.getElementById("pdf-annotate-screenreader-".concat(e));if(n){var r=document.createElement("ol");r.setAttribute("id","pdf-annotate-screenreader-comment-list-".concat(e)),r.setAttribute("aria-label","Comments"),n.appendChild(r),t.forEach(pn)}}))}var vn=["highlight","point","area","circle","emptycircle","fillcircle"];function mn(t,e,n){On.getStoreAdapter().getAnnotations(t,e).then((function(t){return t.annotations.filter((function(t){return t.type===n}))})).then((function(e){return e.forEach((function(e){hn(t,e.uuid)})),e})).then(xn)}function hn(t,e){wn("pdf-annotate-screenreader-".concat(e)),wn("pdf-annotate-screenreader-".concat(e,"-end"))}function gn(t,e,n){var r=document.querySelector("pdf-annotate-screenreader-comment-list-".concat(e));(r?Promise.resolve(!0):yn(t,e,[]).then((function(){return r=document.querySelector("pdf-annotate-screenreader-comment-list-".concat(e)),!0}))).then((function(){pn(n)}))}function bn(t,e){wn("pdf-annotate-screenreader-comment-".concat(e))}function wn(t){var e=document.getElementById(t);e&&e.parentNode.removeChild(e)}function xn(t){t=Array.isArray(t)?t:[],Object.keys(En).forEach((function(e){var n=En[e];t.filter((function(t){return t.type===e})).sort(n).forEach((function(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(t.type){case"highlight":case"strikeout":var n=t.rectangles,r=n[0],o=n[n.length-1];ln(an("Begin ".concat(t.type," annotation ").concat(e),t.uuid),r.x,r.y,t.page,!0),ln(an("End ".concat(t.type," annotation ").concat(e),"".concat(t.uuid,"-end")),o.x+o.width,o.y,t.page,!1);break;case"textbox":case"point":var i="textbox"===t.type?" (content: ".concat(t.content,")"):"";fn(an("".concat(t.type," annotation ").concat(e).concat(i),t.uuid),t.x,t.y,t.page);break;case"drawing":case"area":var a=void 0!==t.x?t.x:t.lines[0][0],u=void 0!==t.y?t.y:t.lines[0][1];fn(an("Unlabeled drawing",t.uuid),a,u,t.page);break;case"circle":case"fillcircle":case"emptycircle":var c=void 0!==t.cx?t.cx:t.lines[0][0],l=void 0!==t.cy?t.cy:t.lines[0][1];fn(an("Unlabeled drawing",t.uuid),c,l,t.page)}vn.includes(t.type)&&yn(t.documentId,t.uuid)}(t,e+1)}))}))}function An(t,e){return t.y<e.y?t.x-e.x:1}function Sn(t,e){return An(t.rectangles[0],e.rectangles[0])}Z("annotation:add",(function(t,e,n){mn(t,e,n.type)})),Z("annotation:edit",(function(t,e,n){mn(t,n.page,n.type)})),Z("annotation:delete",hn),Z("comment:add",gn),Z("comment:delete",bn);var En={highlight:Sn,strikeout:Sn,drawing:function(t,e){var n=t.lines[0],r=e.lines[0];return An({x:n[0],y:n[1]},{x:r[0],y:r[1]})},textbox:An,point:An,area:An};function Cn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ln(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var kn='\n  <div style="visibility: hidden;" class="page" data-loaded="false">\n    <div class="canvasWrapper">\n      <canvas></canvas>\n    </div>\n    <div class="'+Pt.textLayerName+'"></div>\n    <svg class="'+Pt.annotationLayerName+'"></svg>\n  </div>\n';function In(t){if(Math.floor(t)===t)return[t,1];var e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];for(var n=t>1?e:t,r=0,o=1,i=1,a=1;;){var u=r+i,c=o+a;if(c>8)break;n<=u/c?(i=u,a=c):(r=u,o=c)}return n-r/o<i/a-n?n===t?[r,o]:[o,r]:n===t?[i,a]:[a,i]}function _n(t,e){var n=t%e;return 0===n?t:Math.round(t-n+e)}var Nn={addEventListener:Z,removeEventListener:tt,fireEvent:K,disableEdit:function(){Ut(),Xt&&(Xt=!1,tt("annotation:click",Vt))},enableEdit:function(){Xt||(Xt=!0,Z("annotation:click",Vt))},disablePen:function(){te&&(te=!1,document.removeEventListener("pointerdown",re),document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",oe),document.removeEventListener("keyup",ae),D())},enablePen:function(){te||(te=!0,document.addEventListener("pointerdown",re),document.addEventListener("pointermove",ie),document.addEventListener("pointerup",oe),document.addEventListener("keyup",ae),$())},setPen:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"000000";Gt=Math.round(100*parseFloat(t))/100,Kt=e},disablePoint:function(){ke&&(ke=!1,document.removeEventListener("mouseup",Ie))},enablePoint:function(){ke||(ke=!0,document.addEventListener("mouseup",Ie))},disableRect:function(){ze&&(ze=!1,document.removeEventListener("mouseup",Ye),document.removeEventListener("mousedown",Fe),document.removeEventListener("keyup",Ue))},enableRect:function(t){Re=t,ze||(ze=!0,document.addEventListener("mouseup",Ye),document.addEventListener("mousedown",Fe),document.addEventListener("keyup",Ue))},disableSignatureBlock:function(){We&&(We=!1,document.removeEventListener("mouseup",Je))},enableSignatureBlock:function(t){He=t,We||(We=!0,document.addEventListener("mouseup",Je))},setSignatureBlock:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"F9FAC3";$e=parseInt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,10),De=t},addSignatureBlock:function(t,e){var n=He;He=t,Je(e),He=n},disableArrow:function(){pe&&(pe=!1,document.removeEventListener("mousedown",ye),document.removeEventListener("keyup",he),D())},enableArrow:function(){pe||(pe=!0,document.addEventListener("mousedown",ye),document.addEventListener("keyup",he),$())},setArrow:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0000FF";ue=parseInt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,10),ce=t},disableEraser:function(){document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerdown",Ae),document.removeEventListener("pointerup",Se)},enableEraser:function(){document.addEventListener("pointermove",Ee),document.addEventListener("pointerdown",Ae),document.addEventListener("pointerup",Se)},disableText:function(){Ge&&(Ge=!1,document.removeEventListener("mouseup",tn))},enableText:function(){Ge||(Ge=!0,document.addEventListener("mouseup",tn))},setText:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"000000";Ke=parseInt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,10),Ze=t},createPage:function(t){var e=document.createElement("div");e.innerHTML=kn;var n=e.children[0],r=n.querySelector("canvas");return n.setAttribute("id","pageContainer".concat(t)),n.setAttribute("data-page-number",t),r.mozOpaque=!0,r.setAttribute("id","page".concat(t)),n},renderPage:function(t,e){var n=e.documentId,r=e.pdfDocument,o=e.scale,i=e.rotate;return new pdfjsViewer.EventBus,Promise.all([r.getPage(t),On.getAnnotations(n,t)]).then((function(e){var n=Cn(e,2),r=n[0],a=n[1],u=document.getElementById("pageContainer".concat(t)),c=u.querySelector(Pt.annotationClassQuery()),l=u.querySelector(".canvasWrapper canvas").getContext("2d",{alpha:!1}),s=(i+r.rotate)%360,d=r.getViewport({scale:o,rotation:s}),f=function(t,e,n){var r=document.getElementById("pageContainer".concat(t)),o=r.querySelector(".canvasWrapper canvas"),i=r.querySelector(Pt.annotationClassQuery()),a=r.querySelector(".canvasWrapper"),u=r.querySelector(Pt.textClassQuery()),c=(f=n,p=window.devicePixelRatio||1,y=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1,v=p/y,{sx:v,sy:v,scaled:1!==v}),l=c.scaled?[c.sx,0,0,c.sy,0,0]:null,s=In(c.sx),d=In(c.sy);var f,p,y,v;return r.style.visibility="",o.width=_n(e.width*c.sx,s[0]),o.height=_n(e.height*c.sy,d[0]),o.style.width=_n(e.width,s[1])+"px",o.style.height=_n(e.height,s[1])+"px",i.setAttribute("width",e.width),i.setAttribute("height",e.height),i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px"),r.style.width="".concat(e.width,"px"),r.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px"),a.style.height="".concat(e.height,"px"),u.style.width="".concat(e.width,"px"),u.style.height="".concat(e.height,"px"),l}(t,d,l);return Promise.all([r.render({canvasContext:l,viewport:d,transform:f}).promise,On.render(c,d,a)]).then((function(){return r.getTextContent({normalizeWhitespace:!0}).then((function(t){return new Promise((function(t,e){setTimeout((function(){try{xn(a.annotations),t()}catch(t){e(t)}}))}))}))})).then((function(){return u.setAttribute("data-loaded","true"),[r,a]}))}))}},On={findAnnotationAtPoint:F,findSVGContainer:q,convertToScreenPoint:H,StoreAdapter:ot,LocalStoreAdapter:vt,LocalUserStoreAdapter:It,__storeAdapter:new ot,getStoreAdapter:function(){return this.__storeAdapter},setStoreAdapter:function(t){this.__storeAdapter=t},UI:Nn,render:function(t,e,n){return new Promise((function(r,o){return t.setAttribute("data-pdf-annotate-container",!0),t.setAttribute("data-pdf-annotate-viewport",JSON.stringify(e)),t.removeAttribute("data-pdf-annotate-document"),t.removeAttribute("data-pdf-annotate-page"),n?(t.setAttribute("data-pdf-annotate-document",n.documentId),t.setAttribute("data-pdf-annotate-page",n.pageNumber),Array.isArray(n.annotations)&&0!==n.annotations.length?(n.annotations.forEach((function(n){var r=t.querySelector('[data-pdf-annotate-id="'+n.uuid+'"]');r?R(t,r,e):M(t,n,e)})),void r(t)):r(t)):(t.innerHTML="",r(t))}))},getAnnotations:function(t,e){var n;return(n=this.getStoreAdapter()).getAnnotations.apply(n,arguments)},config:Pt,uuid:ut};e.default=On}])}));
//# sourceMappingURL=pdf-annotate.min.js.map